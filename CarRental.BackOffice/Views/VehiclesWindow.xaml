<Window x:Class="CarRental.BackOffice.Views.VehiclesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:CarRental.BackOffice.ViewModels"
        Title="Manage Vehicles - Car Rental System" 
        Height="600" 
        Width="900"
        WindowStartupLocation="CenterScreen">
    
    <Window.DataContext>
        <vm:VehiclesViewModel/>
    </Window.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#007ACC" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Button Grid.Column="0" 
                       Content="← Back" 
                       Click="BackButton_Click"
                       Background="Transparent"
                       BorderBrush="White"
                       Foreground="White"
                       Padding="10 5"/>
                
                <TextBlock Grid.Column="1" 
                          Text="🚗 Vehicle Management" 
                          Foreground="White" 
                          FontSize="18" 
                          FontWeight="Bold"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"/>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="🔄" 
                           Command="{Binding RefreshCommand}"
                           ToolTip="Refresh"
                           Background="Transparent"
                           BorderBrush="White"
                           Foreground="White"
                           Width="40"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Toolbar -->
        <Border Grid.Row="1" Background="#F8F9FA" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox Grid.Column="0" 
                        Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                        Height="35"
                        Padding="10"
                        Background="White">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Setter Property="Tag" Value="🔍 Search vehicles..."/>
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Foreground" Value="Gray"/>
                                    <Setter Property="Text" Value="{Binding Tag, RelativeSource={RelativeSource Self}}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="10 0 0 0">
                    <Button Content="➕ Add Vehicle" 
                           Command="{Binding AddVehicleCommand}"
                           Background="#28A745"
                           Width="120"/>
                    
                    <Button Content="✏️ Edit" 
                           Command="{Binding EditVehicleCommand}"
                           IsEnabled="{Binding IsVehicleSelected}"
                           Width="80"
                           Margin="10 0 0 0"/>
                    
                    <Button Content="🗑️ Delete" 
                           Command="{Binding DeleteVehicleCommand}"
                           IsEnabled="{Binding IsVehicleSelected}"
                           Background="#DC3545"
                           Width="80"
                           Margin="10 0 0 0"/>
                    
                    <Button Content="📊 Availability" 
                           Command="{Binding ToggleAvailabilityCommand}"
                           IsEnabled="{Binding IsVehicleSelected}"
                           Background="#17A2B8"
                           Width="100"
                           Margin="10 0 0 0"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Data Grid -->
        <DataGrid Grid.Row="2" 
                 ItemsSource="{Binding Vehicles}"
                 SelectedItem="{Binding SelectedVehicle}"
                 AutoGenerateColumns="False"
                 CanUserAddRows="False"
                 CanUserDeleteRows="False"
                 IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Make" Binding="{Binding Make}" Width="100"/>
                <DataGridTextColumn Header="Model" Binding="{Binding Model}" Width="100"/>
                <DataGridTextColumn Header="Year" Binding="{Binding Year}" Width="70"/>
                <DataGridTextColumn Header="License Plate" Binding="{Binding LicensePlate}" Width="100"/>
                <DataGridTextColumn Header="Color" Binding="{Binding Color}" Width="80"/>
                <DataGridTextColumn Header="Daily Rate" Binding="{Binding DailyRate, StringFormat=C}" Width="90"/>
                <DataGridCheckBoxColumn Header="Available" Binding="{Binding IsAvailable}" Width="80"/>
                <DataGridTextColumn Header="Type" Binding="{Binding VehicleType}" Width="80"/>
                <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt, StringFormat=yyyy-MM-dd}" Width="100"/>
            </DataGrid.Columns>
            
            <DataGrid.CellStyle>
                <Style TargetType="DataGridCell">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsAvailable}" Value="False">
                            <Setter Property="Background" Value="#FFF5F5"/>
                            <Setter Property="Foreground" Value="#DC3545"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsAvailable}" Value="True">
                            <Setter Property="Background" Value="#F0FFF4"/>
                            <Setter Property="Foreground" Value="#28A745"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.CellStyle>
        </DataGrid>
        
        <!-- Status Bar -->
        <Border Grid.Row="3" Background="#E9ECEF" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" 
                          Text="{Binding StatusMessage}"
                          Foreground="#6C757D"
                          VerticalAlignment="Center"/>
                
                <TextBlock Grid.Column="2" 
                          Text="{Binding VehicleCount, StringFormat='Total Vehicles: {0}'}"
                          Foreground="#6C757D"
                          VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>