<Window x:Class="CarRental.BackOffice.Views.UsersWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModels="clr-namespace:CarRental.BackOffice.ViewModels"
        Title="Manage Users - Car Rental System" 
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterScreen">
    
    <Window.DataContext>
        <viewModels:UsersViewModel/>
    </Window.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#007ACC" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Button Grid.Column="0" 
                       Content="← Back" 
                       Click="BackButton_Click"
                       Background="Transparent"
                       BorderBrush="White"
                       Foreground="White"
                       Padding="10 5"/>
                
                <TextBlock Grid.Column="1" 
                          Text="👥 User Management" 
                          Foreground="White" 
                          FontSize="18" 
                          FontWeight="Bold"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"/>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="🔄" 
                           Command="{Binding RefreshCommand}"
                           ToolTip="Refresh"
                           Background="Transparent"
                           BorderBrush="White"
                           Foreground="White"
                           Width="40"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Toolbar -->
        <Border Grid.Row="1" Background="#F8F9FA" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox Grid.Column="0" 
                        Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                        Height="35"
                        Padding="10"
                        Background="White">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Setter Property="Tag" Value="🔍 Search users..."/>
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Foreground" Value="Gray"/>
                                    <Setter Property="Text" Value="{Binding Tag, RelativeSource={RelativeSource Self}}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>
                
                <StackPanel Grid.Column="1" Orientation="Vertical" Margin="10 0 0 0">
                    <Button Content="➕ Add User" 
                           Command="{Binding AddUserCommand}"
                           Background="#28A745"
                           Width="100"/>
                    
                    <Button Content="✏️ Edit" 
                           Command="{Binding EditUserCommand}"
                           IsEnabled="{Binding IsUserSelected}"
                           Width="80"
                           Margin="10 0 0 0"/>
                    
                    <Button Content="🗑️ Delete" 
                           Command="{Binding DeleteUserCommand}"
                           IsEnabled="{Binding IsUserSelected}"
                           Background="#DC3545"
                           Width="80"
                           Margin="10 0 0 0"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Data Grid -->
        <DataGrid Grid.Row="2" 
                 ItemsSource="{Binding Users}"
                 SelectedItem="{Binding SelectedUser}"
                 AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="150"/>
                <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="200"/>
                <DataGridTextColumn Header="Role" Binding="{Binding Role}" Width="100"/>
                <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt, StringFormat=yyyy-MM-dd}" Width="100"/>
                <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="60"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>